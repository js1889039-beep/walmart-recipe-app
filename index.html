<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Pan Lemon Herb Chicken Recipe</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  --color-bg-1: rgba(59, 130, 246, 0.08);
  --color-bg-2: rgba(245, 158, 11, 0.08);
  --color-bg-3: rgba(34, 197, 94, 0.08);
  --color-bg-4: rgba(239, 68, 68, 0.08);
  --color-bg-5: rgba(147, 51, 234, 0.08);
  --color-bg-6: rgba(249, 115, 22, 0.08);
  --color-bg-7: rgba(236, 72, 153, 0.08);
  --color-bg-8: rgba(6, 182, 212, 0.08);

  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    --color-bg-1: rgba(29, 78, 216, 0.15);
    --color-bg-2: rgba(180, 83, 9, 0.15);
    --color-bg-3: rgba(21, 128, 61, 0.15);
    --color-bg-4: rgba(185, 28, 28, 0.15);
    --color-bg-5: rgba(107, 33, 168, 0.15);
    --color-bg-6: rgba(194, 65, 12, 0.15);
    --color-bg-7: rgba(190, 24, 93, 0.15);
    --color-bg-8: rgba(8, 145, 178, 0.15);

    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
  }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
    background-color: #000000;
    color: #1A1A1A;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2') format('woff2');
}

/* App Container */
.app-container {
    max-width: 400px;
    margin: 0 auto;
    background: #ffffff;
    min-height: 100vh;
    position: relative;
    padding-bottom: 70px;
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
}

/* Header */
.header {
    position: sticky;
    top: 0;
    background: #ffffff;
    padding: 12px 16px;
    z-index: 100;
    border-bottom: 1px solid #e0e0e0;
    display: none;
}

.back-button {
    position: fixed;
    top: 140px;
    left: 50%;
    margin-left: calc(-400px / 2 + 16px);
    z-index: 1000;
    background: #ffffff;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    color: #000000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
}

.back-button:hover {
    background: #f5f5f5;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transform: scale(1.05);
}

.back-button:active {
    transform: scale(0.95);
}

/* Hero Image */
.hero-image {
    width: 100%;
    padding: 20px;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
}

.hero-image-container {
    width: 100%;
    max-width: 360px;
    height: 220px;
    border-radius: 12px;
    overflow: hidden;
    background: #F5F5F5;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #e0e0e0;
}

.hero-image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Content */
.content {
    padding: var(--space-20);
}



/* Info Cards */
.info-cards {
    display: flex;
    gap: 10px;
    margin-bottom: 16px;
}

.info-card {
    flex: 1;
    background: #F5F5F5;
    padding: 12px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.info-card-value {
    font-size: 16px;
    font-weight: 700;
    color: #000000;
    display: block;
    margin-bottom: 4px;
}

.info-card-label {
    font-size: 12px;
    color: #666666;
}

/* Coupon Button */
.coupon-button {
    width: 100%;
    padding: 14px 16px;
    background: #FFD700;
    color: #000000;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 20px;
    transition: all 0.15s ease;
}

.coupon-button:hover {
    background: #FFC107;
    transform: translateY(-1px);
}

.coupon-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    stroke: #000000;
}

.coupon-button.coupon-unavailable .coupon-icon {
    stroke: rgba(0, 0, 0, 0.5);
    opacity: 0.6;
}

/* Coupon Unavailable (Past Recipes) */
.coupon-button.coupon-unavailable {
    background: rgba(255, 215, 0, 0.4);
    color: rgba(0, 0, 0, 0.5);
    cursor: not-allowed;
    pointer-events: none;
    opacity: 0.6;
}

.coupon-button.coupon-unavailable:hover {
    background: rgba(255, 215, 0, 0.4);
    transform: none;
}

/* Servings Counter */
.servings-section {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 12px 0;
}

.servings-label {
    font-size: 14px;
    font-weight: 500;
    color: #666666;
}

.servings-counter {
    display: flex;
    align-items: center;
    gap: 12px;
}

.counter-button {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1px solid #e0e0e0;
    background: #ffffff;
    color: #000000;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s ease;
}

.counter-button:hover {
    background: #f5f5f5;
}

.counter-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.servings-value {
    font-size: 16px;
    font-weight: 700;
    color: #000000;
    min-width: 30px;
    text-align: center;
}

/* Tabs */
.tabs {
    display: flex;
    gap: 24px;
    margin-bottom: 20px;
    border-bottom: 2px solid #e0e0e0;
}

.tab {
    background: none;
    border: none;
    padding: 12px 4px;
    font-size: 15px;
    font-weight: 500;
    color: #808080;
    cursor: pointer;
    position: relative;
    transition: color 0.15s ease;
}

.tab.active {
    color: #0066CC;
    font-weight: 600;
}

.tab.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 3px;
    background: #0066CC;
}

/* Ingredients List */
.ingredients-list {
    margin-bottom: var(--space-20);
}

.ingredient-item {
    padding: 16px;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    margin-bottom: 12px;
}

.ingredient-main {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
}

.ingredient-text {
    flex: 1;
    font-size: 14px;
    font-weight: 600;
    color: #000000;
    line-height: 1.4;
}

.ingredient-aisle {
    font-size: 12px;
    color: #808080;
    margin-top: 4px;
    font-weight: 400;
}

.substitution-button {
    padding: 6px 12px;
    background: #ffffff;
    color: #0066CC;
    border: 1px solid #0066CC;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.15s ease;
}

.substitution-button:hover {
    background: #0066CC;
    color: #ffffff;
}

/* Instructions */
.instructions-list {
    display: none;
}

.instructions-list.active {
    display: block;
}

.instruction-item {
    padding: 16px;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    margin-bottom: 12px;
    display: flex;
    gap: 12px;
}

.instruction-number {
    width: 28px;
    height: 28px;
    background: #0066CC;
    color: #ffffff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 700;
    flex-shrink: 0;
}

.instruction-text {
    flex: 1;
    font-size: 14px;
    color: #1A1A1A;
    line-height: 1.6;
}

/* Add to Cart Button */
.add-cart-button {
    width: 100%;
    padding: 14px 16px;
    background: #0066CC;
    color: #ffffff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    margin-bottom: 20px;
    transition: all 0.15s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.add-cart-button:hover {
    background: #0052A3;
    transform: translateY(-1px);
}

/* Nutrition Facts */
.nutrition-section {
    background: #ffffff;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    margin-bottom: 20px;
}

.nutrition-title {
    font-size: 17px;
    font-weight: 700;
    margin-bottom: 4px;
    color: #000000;
}

.nutrition-subtitle {
    font-size: 12px;
    color: #808080;
    margin-bottom: 16px;
}

.nutrition-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    row-gap: 12px;
}

.nutrition-item {
    text-align: left;
    display: flex;
    align-items: baseline;
    gap: 4px;
}

.nutrition-item:nth-child(even) {
    justify-content: flex-start;
}

.nutrition-value {
    font-size: 18px;
    font-weight: 700;
    color: #000000;
}

.nutrition-label {
    font-size: 14px;
    color: #000000;
    font-weight: 400;
}

/* Bottom Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    max-width: 400px;
    width: 100%;
    background: #ffffff;
    border-top: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-around;
    padding: 12px 0;
    z-index: 100;
}

.nav-item {
    background: none;
    border: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    color: #999999;
    font-size: 11px;
    padding: 4px 12px;
    transition: color 0.15s ease;
}

.nav-item:hover {
    color: #0066CC;
}

.nav-item.active {
    color: #0071DC;
}

.nav-item svg {
    width: 24px;
    height: 24px;
}

.nav-icon {
    width: 24px;
    height: 24px;
    stroke: currentColor;
}

.nav-icon-container {
    position: relative;
    display: inline-block;
}

.favorite-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background: #0071DC;
    color: white;
    border-radius: 50%;
    min-width: 18px;
    height: 18px;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
    border: 2px solid white;
    padding: 0 4px;
    box-sizing: border-box;
    z-index: 10;
}

/* Cart Badge - Yellow */
.cart-badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background: #FFD700;
    color: #000000;
    border-radius: 50%;
    min-width: 18px;
    height: 18px;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
    border: 2px solid white;
    padding: 0 4px;
    box-sizing: border-box;
    z-index: 10;
}

@keyframes badgePop {
    0% { transform: scale(1); }
    50% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.cart-badge.updated {
    animation: badgePop 0.3s ease;
}

/* Floating ChatGPT Button */
.chatgpt-button {
    position: fixed;
    bottom: 95px;
    right: 20px;
    width: 36px;
    height: 36px;
    background: #00000000;
    color: #00000000;
    border: none;
    border-radius: 50%;
    font-size: 28px;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 102, 204, 0.4);
    transition: all 0.2s ease;
    z-index: 99;
    left: auto;
    transform: none;
}

/* Position ChatGPT button relative to app container */
.app-container .chatgpt-button {
    position: fixed;
    left: 50%;
    right: auto;
    margin-left: calc(400px / 2 - 76px);
}

.chatgpt-button:hover {
    background: #0052A3;
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 102, 204, 0.5);
}

.chatgpt-button.active {
    display: flex;
}

.chatgpt-button:active {
    transform: scale(1.05);
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: var(--space-20);
}

.modal.active {
    display: flex;
}

.modal-content {
    background: #ffffff;
    border-radius: 12px;
    padding: 24px;
    max-width: 360px;
    width: 100%;
    position: relative;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

.modal-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    font-size: 24px;
    color: #808080;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.15s ease;
}

.modal-close:hover {
    background: #f5f5f5;
}

.modal-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 16px;
    color: #000000;
}

.coupon-code {
    background: #FFF9E6;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    margin-bottom: 16px;
    border: 1px dashed #FFD700;
}

.coupon-code-text {
    font-size: 28px;
    font-weight: 700;
    color: #000000;
    font-family: 'Courier New', monospace;
    letter-spacing: 3px;
    margin-bottom: 8px;
}

.coupon-description {
    font-size: 14px;
    color: #666666;
}

.copy-button {
    width: 100%;
    padding: 12px;
    background: #0066CC;
    color: #ffffff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s ease;
}

.copy-button:hover {
    background: #0052A3;
}

.copy-button.copied {
    background: #4CAF50;
}

.barcode-container {
    display: flex;
    justify-content: center;
    align-items: center;
    background: #ffffff;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 16px;
    border: 1px solid #e0e0e0;
}

/* Substitution Modal */
.substitution-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.substitution-option {
    padding: 16px;
    background: #F5F5F5;
    border: 2px solid transparent;
    border-radius: 8px;
    font-size: 14px;
    color: #1A1A1A;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
}

.substitution-option:hover {
    border-color: #0066CC;
    background: rgba(0, 102, 204, 0.1);
}

/* Success Message */
.success-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #0071DC;
    color: #ffffff;
    padding: 20px 32px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    z-index: 2000;
    display: none;
}

.success-message.active {
    display: block;
    animation: fadeInOut 2s var(--ease-standard);
}

@keyframes fadeInOut {
    0% { opacity: 0; transform: translate(-50%, -60%); }
    15% { opacity: 1; transform: translate(-50%, -50%); }
    85% { opacity: 1; transform: translate(-50%, -50%); }
    100% { opacity: 0; transform: translate(-50%, -40%); }
}

/* View Container */
.view-container {
    width: 100%;
    min-height: 100vh;
}

/* Walmart Header Styles */
.walmart-header {
    background: #0071DC;
    position: sticky;
    top: 0;
    z-index: 100;
}

.walmart-search-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
}

.walmart-search-bar {
    flex: 1;
    background: #ffffff;
    border-radius: 24px;
    display: flex;
    align-items: center;
    padding: 10px 16px;
    gap: 8px;
}

.search-icon-left {
    font-size: 18px;
    color: #666666;
}

.walmart-search-input {
    flex: 1;
    border: none;
    outline: none;
    font-size: 14px;
    color: #999999;
    background: transparent;
}

.walmart-search-input::placeholder {
    color: #999999;
}

.barcode-icon {
    font-size: 18px;
    color: #666666;
}

.walmart-cart-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.15s ease;
}

.walmart-cart-btn:hover {
    opacity: 0.8;
}

.cart-icon {
    font-size: 24px;
    color: #ffffff;
}

.walmart-location-bar {
    background: #0071DC;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #ffffff;
    font-size: 13px;
}

.location-icon {
    font-size: 16px;
}

.location-text {
    flex: 1;
    font-weight: 500;
}

.dropdown-icon {
    font-size: 10px;
}



.recipe-tabs-row {
    background: #ffffff;
    padding: 0 16px;
    display: flex;
    gap: 24px;
    border-bottom: 2px solid #e0e0e0;
}

.recipe-tab {
    background: none;
    border: none;
    padding: 12px 4px;
    font-size: 15px;
    font-weight: 500;
    color: #808080;
    cursor: pointer;
    position: relative;
    transition: color 0.15s ease;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
}

.recipe-tab.active {
    color: #0071DC;
    font-weight: 600;
    border-bottom-color: #0071DC;
}

.recipe-tab:hover {
    color: #0071DC;
}

/* Recipe Cards */
.recipe-cards-container {
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 80px;
}

.recipe-card {
    position: relative;
    width: 100%;
    height: 170px;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
}

.recipe-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.recipe-card-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.recipe-card-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.6) 100%);
}

.recipe-card-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 16px;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    z-index: 2;
}

.recipe-card-text {
    flex: 1;
}

.recipe-card-title {
    font-size: 20px;
    font-weight: 700;
    color: #ffffff;
    margin: 0 0 4px 0;
    line-height: 1.3;
}

.recipe-card-description {
    font-size: 14px;
    color: #ffffff;
    margin: 0;
    opacity: 0.9;
}

.recipe-card-arrow {
    font-size: 28px;
    color: #ffffff;
    font-weight: 300;
    line-height: 1;
}

/* Favorite Button Styles */
.recipe-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 16px;
}

.recipe-title {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 0;
    color: #000000;
    line-height: 1.3;
    flex: 1;
}

.favorite-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    min-width: 40px;
    background: #ffffff;
    border: 1px solid #E0E0E0;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.favorite-button:hover {
    transform: scale(1.1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.favorite-button:active {
    transform: scale(1.05);
}

.star-icon {
    font-size: 22px;
    line-height: 1;
    transition: all 0.3s ease;
}

.star-outline {
    color: #FFD700;
    filter: brightness(1);
}

.star-filled {
    color: #FFD700;
    filter: brightness(1.1);
}

/* Star Rating Styles */
.rating-container {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 12px 0 16px 0;
}

.stars {
    display: flex;
    gap: 2px;
    font-size: 20px;
    line-height: 1;
}

.star.filled {
    color: #FFD700;
}

.star.empty {
    color: #D0D0D0;
}

.review-count {
    font-size: 14px;
    color: #808080;
    font-weight: 400;
}

/* Reviews Section Styles */
.reviews-section {
    margin-top: 32px;
    padding: 24px 0;
}

.reviews-title {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 20px;
    color: #000000;
}

.review-card {
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
}

.review-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
    flex-wrap: wrap;
}

.review-stars {
    display: flex;
    gap: 2px;
}

.review-stars .star {
    font-size: 16px;
    line-height: 1;
}

.review-stars .star.filled {
    color: #FFD700;
}

.review-stars .star.empty {
    color: #D0D0D0;
}

.verified-badge {
    background: #E8F5E9;
    color: #2E7D32;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.review-date {
    color: #808080;
    font-size: 14px;
    margin-left: auto;
}

.review-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
    color: #000000;
}

.review-text {
    font-size: 14px;
    line-height: 1.6;
    color: #1A1A1A;
    margin-bottom: 12px;
}

.see-more {
    color: #0066CC;
    cursor: pointer;
    font-weight: 500;
}

.reviewer-name {
    font-size: 14px;
    font-weight: 500;
    color: #000000;
    margin-bottom: 12px;
}

.review-actions {
    display: flex;
    gap: 16px;
    padding-top: 12px;
    border-top: 1px solid #e0e0e0;
}

.helpful-btn, .flag-btn {
    background: none;
    border: none;
    font-size: 14px;
    color: #808080;
    cursor: pointer;
    padding: 4px 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: all 0.15s ease;
}

.helpful-btn:hover, .flag-btn:hover {
    background: #f5f5f5;
    border-radius: 4px;
}

.view-more-btn {
    width: 100%;
    padding: 12px;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    color: #0066CC;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 16px;
    transition: all 0.15s ease;
}

.view-more-btn:hover {
    background: #f5f5f5;
}

.chevron-down {
    width: 20px;
    height: 20px;
}

@media (prefers-color-scheme: dark) {
  
    
    /*.review-card {
        background: var(--color-charcoal-800);
        border-color: rgba(var(--color-gray-400-rgb), 0.3);
    }
    
    .review-title {
        color: #f5f5f5;
    }
    
    .review-text {
        color: #f5f5f5;
    }
    
    .reviewer-name {
        color: #f5f5f5;
    } */
    
    .review-actions {
        border-top-color: rgba(var(--color-gray-400-rgb), 0.3);
    }
    
   /* .view-more-btn {
        background: var(--color-charcoal-800);
        border-color: rgba(var(--color-gray-400-rgb), 0.3);
        color: var(--color-teal-300);
    }
    
    .view-more-btn:hover {
        background: rgba(var(--color-gray-400-rgb), 0.15);
    } */
}
    </style>
</head>
<body>
    <div class="app-container">
        <!-- MENU VIEW -->
        <div id="menuView" class="view-container">
            <!-- Walmart Header -->
            <div class="walmart-header">
                <!-- Search Bar Row -->
                <div class="walmart-search-row">
                    <div class="walmart-search-bar">
                        <span class="search-icon-left">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="11" cy="11" r="7" stroke="#D3D3D3" stroke-width="2.5"/>
        <path d="M16.5 16.5L21 21" stroke="#D3D3D3" stroke-width="2.5" stroke-linecap="round"/>
    </svg>
</span>
                        <input type="text" class="walmart-search-input" placeholder="Discover delicious meals" readonly>
                        <span class="barcode-icon">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Barcode lines -->
        <line x1="4" y1="5" x2="4" y2="19" stroke="#666666" stroke-width="2"/>
        <line x1="7" y1="5" x2="7" y2="19" stroke="#666666" stroke-width="1.5"/>
        <line x1="10" y1="5" x2="10" y2="19" stroke="#666666" stroke-width="2.5"/>
        <line x1="13" y1="5" x2="13" y2="19" stroke="#666666" stroke-width="1"/>
        <line x1="16" y1="5" x2="16" y2="19" stroke="#666666" stroke-width="2"/>
        <line x1="19" y1="5" x2="19" y2="19" stroke="#666666" stroke-width="1.5"/>
    </svg>
</span>
                    </div>
                    <button class="walmart-cart-btn" onclick="handleNavClick('cart')">
    							<div style="position: relative; display: inline-block;">
        <svg class="cart-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Shopping cart outline - transparent background -->
            <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" fill="none" stroke="white" stroke-width="1.2"/>
        </svg>
        <span class="cart-badge" id="cartBadgeMenu" style="display: none; background: #FFC220; color: #000000; border-radius: 50%; min-width: 18px; height: 18px; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; position: absolute; top: -4px; right: -4px;">0</span>
    </div>
</button>
                </div>
                
                <!-- Location Bar -->
                <div class="walmart-location-bar">
                    <span class="location-icon">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#FFFFFF"/>
    </svg>
</span>
                    <span class="location-text">How do you want your items? | 72701</span>
                    <span class="dropdown-icon">‚ñº</span>
                </div>
                

                
                <!-- Recipe Tabs -->
                <div class="recipe-tabs-row">
                    <button class="recipe-tab active" onclick="switchMenuTab('thisWeek')" id="thisWeekTab">This Week</button>
                    <button class="recipe-tab" onclick="switchMenuTab('pastRecipes')" id="pastRecipesTab">Past Recipes</button>
                </div>
            </div>

            <!-- Recipe Cards - This Week -->
            <div class="recipe-cards-container" id="thisWeekRecipes">
                <div class="recipe-card" onclick="openRecipeDetail(1)">
                    <img src="https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=800&q=80" alt="One-Pan Lemon Herb Chicken" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">One-Pan Lemon Herb Chicken</h3>
                            <p class="recipe-card-description">Protein +, 20 min, Easy</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(2)">
                    <img src="https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=800&q=80" alt="Chicken Stir-fry" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Chicken Stir-fry</h3>
                            <p class="recipe-card-description">Protein +, 20 min, Easy</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(3)">
                    <img src="https://images.unsplash.com/photo-1547592166-23ac45744acd?w=800&q=80" alt="Vegan Lentil Soup" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Vegan Lentil Soup</h3>
                            <p class="recipe-card-description">Vegan, 30 min, Hearty</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(4)">
                    <img src="https://images.unsplash.com/photo-1555949258-eb67b1ef0ceb?w=800&q=80" alt="Quick Pasta Bake" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Quick Pasta Bake</h3>
                            <p class="recipe-card-description">Family Favorite, 25 min</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(5)">
                    <img src="https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=800&q=80" alt="Salmon with Vegetables" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Salmon with Vegetables</h3>
                            <p class="recipe-card-description">Seafood, 25 min, Elegant</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>
            </div>

            <!-- Recipe Cards - Past Recipes -->
            <div class="recipe-cards-container" id="pastRecipesRecipes" style="display: none;">
                <div class="recipe-card" onclick="openRecipeDetail(6)">
                    <img src="https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=800&q=80" alt="Beef Tacos" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Beef Tacos</h3>
                            <p class="recipe-card-description">Mexican, 25 min, Family Favorite</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(7)">
                    <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=800&q=80" alt="Margherita Pizza" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Margherita Pizza</h3>
                            <p class="recipe-card-description">Italian, 30 min, Classic</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(8)">
                    <img src="https://images.unsplash.com/photo-1546793665-c74683f339c1?w=800&q=80" alt="Chicken Caesar Salad" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Chicken Caesar Salad</h3>
                            <p class="recipe-card-description">Salad, 15 min, Light &amp; Fresh</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(9)">
                    <img src="https://images.unsplash.com/photo-1633504581786-316c8002b1b9?w=800&q=80" alt="Shrimp Scampi" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Shrimp Scampi</h3>
                            <p class="recipe-card-description">Seafood, 20 min, Elegant</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>

                <div class="recipe-card" onclick="openRecipeDetail(10)">
                    <img src="https://images.unsplash.com/photo-1455619452474-d2be8b1e70cd?w=800&q=80" alt="Vegetable Curry" class="recipe-card-image" onerror="this.style.display='none'">
                    <div class="recipe-card-overlay"></div>
                    <div class="recipe-card-content">
                        <div class="recipe-card-text">
                            <h3 class="recipe-card-title">Vegetable Curry</h3>
                            <p class="recipe-card-description">Vegan, 35 min, Warming</p>
                        </div>
                        <div class="recipe-card-arrow">‚Ä∫</div>
                    </div>
                </div>
            </div>

            <!-- Menu Bottom Navigation -->
           <div class="bottom-nav">
    <button class="nav-item" onclick="handleNavClick('Shop')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>Shop</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('myitems')">
        <div class="nav-icon-container">
            <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span class="favorite-badge" id="favoritesBadgeMenu">0</span>
        </div>
        <span>My Items</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('search')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span>Search</span>
    </button>
    
    <button class="nav-item active">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6" stroke="white" stroke-width="2" stroke-linecap="round"></line>
            <line x1="8" y1="2" x2="8" y2="6" stroke="white" stroke-width="2" stroke-linecap="round"></line>
            <line x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="2"></line>
        </svg>
        <span>Recipes</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('account')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>Account</span>
    </button>
</div>
        </div>
<div class="success-message" id="successMessage"></div>
        <!-- End of menuView -->

        <!-- RECIPE DETAIL VIEW -->
        <div id="recipeView" class="view-container" style="display: none;">
            <!-- Floating ChatGPT Button -->
            <button class="chatgpt-button" id="chatgptButton" onclick="openChatGPT()" title="Ask Sparky about this recipe">
<svg width="36" height="36" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
  <!-- Blue circle background -->
  <circle cx="50" cy="50" r="50" fill="#1e3a8a"/>
  
  <!-- LARGE yellow smiley face -->
  <circle cx="50" cy="50" r="48" fill="#FFD700"/>
  
  <!-- Left eye -->
  <ellipse cx="36" cy="38" rx="7" ry="11" fill="#1e3a8a"/>
  
  <!-- Right eye -->
  <ellipse cx="64" cy="38" rx="7" ry="11" fill="#1e3a8a"/>
  
  <!-- Smile -->
  <path d="M 30 62 Q 50 75 70 62" stroke="#1e3a8a" stroke-width="6" fill="none" stroke-linecap="round"/>
                </svg>
            </button>
            
            <!-- Walmart Header (same as menu view) -->
            <div class="walmart-header">
                <!-- Search Bar Row -->
                <div class="walmart-search-row">
                    <div class="walmart-search-bar">
                        <span class="search-icon-left">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="11" cy="11" r="7" stroke="#D3D3D3" stroke-width="2.5"/>
        <path d="M16.5 16.5L21 21" stroke="#D3D3D3" stroke-width="2.5" stroke-linecap="round"/>
    </svg>
</span>
                        <input type="text" class="walmart-search-input" placeholder="Discover delicious meals" readonly>
                        <span class="barcode-icon">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Barcode lines -->
        <line x1="4" y1="5" x2="4" y2="19" stroke="#666666" stroke-width="2"/>
        <line x1="7" y1="5" x2="7" y2="19" stroke="#666666" stroke-width="1.5"/>
        <line x1="10" y1="5" x2="10" y2="19" stroke="#666666" stroke-width="2.5"/>
        <line x1="13" y1="5" x2="13" y2="19" stroke="#666666" stroke-width="1"/>
        <line x1="16" y1="5" x2="16" y2="19" stroke="#666666" stroke-width="2"/>
        <line x1="19" y1="5" x2="19" y2="19" stroke="#666666" stroke-width="1.5"/>
    </svg>
</span>
                    </div>
                    <button class="walmart-cart-btn" onclick="handleNavClick('cart')">
    <div style="position: relative; display: inline-block;">
        <svg class="cart-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Shopping cart outline - transparent background -->
            <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" fill="none" stroke="white" stroke-width="1.2"/>
        </svg>
        <span class="cart-badge" id="cartBadgeRecipe" style="display: none; background: #FFC220; color: #000000; border-radius: 50%; min-width: 18px; height: 18px; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; position: absolute; top: -4px; right: -4px;">0</span>
    </div>
</button>
                </div>
                
                <!-- Location Bar -->
                <div class="walmart-location-bar">
                    <span class="location-icon">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" fill="#FFFFFF"/>
    </svg>
</span>
                    <span class="location-text">How do you want your items? | 72701</span>
                    <span class="dropdown-icon">‚ñº</span>
                </div>
            </div>
            
            <!-- Fixed Back Button -->
            <button class="back-button" onclick="goBackToMenu()">
                <span>‚Üê</span>
            </button>

        <!-- Hero Image -->
        <div class="hero-image">
            <div class="hero-image-container" id="heroImageContainer">
                <img src="https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=800&q=80" alt="Recipe" onerror="this.style.display='none'; this.parentElement.innerHTML='üçãüçó'">
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <div class="recipe-header">
                <h1 class="recipe-title" id="recipeTitle">One-Pan Lemon Herb Chicken</h1>
                <button class="favorite-button" onclick="toggleFavorite()" id="favoriteButton" aria-label="Add to favorites" title="Add to favorites">
                    <span class="star-icon star-outline" id="starIcon">‚òÜ</span>
                </button>
            </div>
            
            <!-- Star Rating -->
            <div class="rating-container" id="ratingContainer">
                <div class="stars" id="starsDisplay"></div>
                <span class="review-count" id="reviewCount"></span>
            </div>

            <!-- Info Cards -->
            <div class="info-cards">
                <div class="info-card">
                    <span class="info-card-value" id="prepTime">15 min</span>
                    <span class="info-card-label">Prep Time</span>
                </div>
                <div class="info-card">
                    <span class="info-card-value" id="cookTime">30 min</span>
                    <span class="info-card-label">Cook Time</span>
                </div>
                <div class="info-card">
                    <span class="info-card-value" id="difficulty">Easy</span>
                    <span class="info-card-label">Difficulty</span>
                </div>
            </div>

            <!-- Coupon Button -->
            <div id="couponButtonContainer">
                <!-- Dynamically generated based on recipe -->
            </div>

            <!-- Servings Counter -->
            <div class="servings-section">
                <div class="servings-label">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle; margin-right: 6px;">
        <!-- Three people icon -->
        <circle cx="9" cy="7" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
        <path d="M3 21C3 18.2386 5.23858 16 8 16H10C12.7614 16 15 18.2386 15 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
        <circle cx="18" cy="7" r="2.5" stroke="currentColor" stroke-width="2" fill="none"/>
        <path d="M17 15C19.2091 15 21 16.7909 21 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
    </svg>
    Servings
</div>
                <div class="servings-counter">
                    <button class="counter-button" onclick="decreaseServings()" id="decreaseBtn">-</button>
                    <span class="servings-value" id="servingsValue">4</span>
                    <button class="counter-button" onclick="increaseServings()" id="increaseBtn">+</button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('ingredients')" id="ingredientsTab">Ingredients</button>
                <button class="tab" onclick="showTab('utilities')" id="utilitiesTab">Utilities</button>
                <button class="tab" onclick="showTab('instructions')" id="instructionsTab">Instructions</button>
            </div>

            <!-- Ingredients List -->
            <div class="ingredients-list" id="ingredientsList">
                <!-- Ingredients will be dynamically generated -->
            </div>

            <!-- Utilities List -->
            <div class="utilities-list" id="utilitiesList" style="display: none;">
                <!-- Utilities will be dynamically generated -->
            </div>

            <!-- Instructions List -->
            <div class="instructions-list" id="instructionsList">
                <!-- Instructions will be dynamically generated -->
            </div>

            <!-- Nutrition Facts -->
            <div class="nutrition-section">
                <h2 class="nutrition-title">Nutrition Facts</h2>
                <div class="nutrition-subtitle">per serving</div>
                <div class="nutrition-grid">
                    <div class="nutrition-item">
                        <span class="nutrition-label">Calories</span>
                        <span class="nutrition-value">450</span>
                    </div>
                    <div class="nutrition-item">
                        <span class="nutrition-label">Fat</span>
                        <span class="nutrition-value">18g</span>
                    </div>
                    <div class="nutrition-item">
                        <span class="nutrition-label">Carbs</span>
                        <span class="nutrition-value">35g</span>
                    </div>
                    <div class="nutrition-item">
                        <span class="nutrition-label">Protein</span>
                        <span class="nutrition-value">42g</span>
                    </div>
                </div>
            </div>
            
            <!-- Reviews Section -->
            <div class="reviews-section" id="reviewsSection">
                <h2 class="reviews-title">Reviews</h2>
                <div id="reviewsContainer"></div>
                <button class="view-more-btn" onclick="showComingSoon()">
                    <span>View More Reviews</span>
                    <svg class="chevron-down" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </div>
        </div>

            <!-- Bottom Navigation -->
            <div class="bottom-nav">
    <button class="nav-item" onclick="handleNavClick('Shop')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>Shop</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('myitems')">
        <div class="nav-icon-container">
            <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span class="favorite-badge" id="favoritesBadgeRecipe">0</span>
        </div>
        <span>My Items</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('search')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span>Search</span>
    </button>
    
    <button class="nav-item active" onclick="handleNavClick('recipes')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6" stroke="white" stroke-width="2" stroke-linecap="round"></line>
            <line x1="8" y1="2" x2="8" y2="6" stroke="white" stroke-width="2" stroke-linecap="round"></line>
            <line x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="2"></line>
        </svg>
        <span>Recipes</span>
    </button>
    
    <button class="nav-item" onclick="handleNavClick('account')">
        <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>Account</span>
    </button>
</div>

    <!-- Coupon Modal -->
    <div class="modal" id="couponModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeCouponModal()">√ó</button>
            <h2 class="modal-title">Your Coupon Code</h2>
            <div class="coupon-code">
                <div class="coupon-code-text" id="couponCodeText">LEMON25</div>
                <div class="coupon-description" id="couponDescription">25% off your order!</div>
            </div>
            <div class="barcode-container">
                <svg width="180" height="70" viewBox="0 0 180 70" xmlns="http://www.w3.org/2000/svg">
                    <rect x="5" y="10" width="3" height="50" fill="#000"/>
                    <rect x="10" y="10" width="2" height="50" fill="#000"/>
                    <rect x="15" y="10" width="4" height="50" fill="#000"/>
                    <rect x="22" y="10" width="2" height="50" fill="#000"/>
                    <rect x="27" y="10" width="5" height="50" fill="#000"/>
                    <rect x="35" y="10" width="2" height="50" fill="#000"/>
                    <rect x="40" y="10" width="3" height="50" fill="#000"/>
                    <rect x="46" y="10" width="2" height="50" fill="#000"/>
                    <rect x="51" y="10" width="4" height="50" fill="#000"/>
                    <rect x="58" y="10" width="3" height="50" fill="#000"/>
                    <rect x="64" y="10" width="2" height="50" fill="#000"/>
                    <rect x="69" y="10" width="5" height="50" fill="#000"/>
                    <rect x="77" y="10" width="2" height="50" fill="#000"/>
                    <rect x="82" y="10" width="3" height="50" fill="#000"/>
                    <rect x="88" y="10" width="4" height="50" fill="#000"/>
                    <rect x="95" y="10" width="2" height="50" fill="#000"/>
                    <rect x="100" y="10" width="5" height="50" fill="#000"/>
                    <rect x="108" y="10" width="2" height="50" fill="#000"/>
                    <rect x="113" y="10" width="3" height="50" fill="#000"/>
                    <rect x="119" y="10" width="2" height="50" fill="#000"/>
                    <rect x="124" y="10" width="4" height="50" fill="#000"/>
                    <rect x="131" y="10" width="3" height="50" fill="#000"/>
                    <rect x="137" y="10" width="2" height="50" fill="#000"/>
                    <rect x="142" y="10" width="5" height="50" fill="#000"/>
                    <rect x="150" y="10" width="2" height="50" fill="#000"/>
                    <rect x="155" y="10" width="4" height="50" fill="#000"/>
                    <rect x="162" y="10" width="2" height="50" fill="#000"/>
                    <rect x="167" y="10" width="3" height="50" fill="#000"/>
                    <rect x="173" y="10" width="2" height="50" fill="#000"/>
                </svg>
            </div>
            <button class="copy-button" onclick="copyCouponCode()" id="copyButton">Copy Code</button>
        </div>
    </div>

    <!-- Substitution Modal -->
    <div class="modal" id="substitutionModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeSubstitutionModal()">√ó</button>
            <h2 class="modal-title" id="substitutionTitle">Choose a Substitution</h2>
            <div class="substitution-options" id="substitutionOptions"></div>
        </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage"></div>
</div>
<!-- End of recipeView -->
</div>
<!-- End of app-container -->

    <script>
	// Track current tab and scroll positions
        let currentTab = 'thisWeek';
        let scrollPositions = {
            thisWeek: 0,
            pastRecipes: 0
        };

        // Switch between menu tabs
        function switchMenuTab(tab) {
            // Save current scroll position before switching
            scrollPositions[currentTab] = window.scrollY || window.pageYOffset;
            
            currentTab = tab;
            const thisWeekTab = document.getElementById('thisWeekTab');
            const pastRecipesTab = document.getElementById('pastRecipesTab');
            const thisWeekRecipes = document.getElementById('thisWeekRecipes');
            const pastRecipesRecipes = document.getElementById('pastRecipesRecipes');

            if (tab === 'thisWeek') {
                thisWeekTab.classList.add('active');
                pastRecipesTab.classList.remove('active');
                thisWeekRecipes.style.display = 'flex';
                pastRecipesRecipes.style.display = 'none';
            } else {
                thisWeekTab.classList.remove('active');
                pastRecipesTab.classList.add('active');
                thisWeekRecipes.style.display = 'none';
                pastRecipesRecipes.style.display = 'flex';
            }
            
            // Restore scroll position for the new tab
            setTimeout(() => {
                const savedScrollPos = scrollPositions[tab] || 0;
                window.scrollTo(0, savedScrollPos);
            }, 10);
        }

        // Recipe ratings data - varied ratings (no perfect 5.0, no 0 stars)
        const recipeRatings = {
            1: { rating: 4.6, reviews: 342 },
            2: { rating: 3.8, reviews: 189 },
            3: { rating: 4.2, reviews: 267 },
            4: { rating: 3.5, reviews: 156 },
            5: { rating: 4.4, reviews: 298 },
            6: { rating: 4.7, reviews: 421 },
            7: { rating: 4.9, reviews: 512 },
            8: { rating: 3.9, reviews: 234 },
            9: { rating: 4.3, reviews: 387 },
            10: { rating: 3.6, reviews: 203 }
        };
        
        // Recipe database
        const recipesData = {
            1: {
                name: "One-Pan Lemon Herb Chicken",
                prepTime: "15 min",
                cookTime: "30 min",
                difficulty: "Easy",
                baseServings: 4,
                couponCode: "LEMON-HERB",
                couponDescription: "05%, 10%, or 15% off your order!",
                image: "https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=800&q=80",
                ingredients: [
                    { baseAmount: 4, unit: "pieces", name: "boneless, skinless chicken breasts", aisle: "Aisle 7", 
                      substitutions: ["Chicken thighs", "Turkey breast", "Firm tofu"],
                      nutritionAdjustments: {
                        "Chicken thighs": {calories: 50, fat: 8, carbs: 0, protein: -2},
                        "Turkey breast": {calories: -20, fat: -2, carbs: 0, protein: 3},
                        "Firm tofu": {calories: -150, fat: -8, carbs: 5, protein: -15}
                      }
                    },
                    { baseAmount: 1, unit: "lb", name: "small potatoes, halved", aisle: "Aisle 3", 
                      substitutions: ["Sweet potatoes", "Cauliflower florets", "Baby carrots"],
                      nutritionAdjustments: {
                        "Sweet potatoes": {calories: 10, fat: 0, carbs: 5, protein: 0},
                        "Cauliflower florets": {calories: -50, fat: 0, carbs: -12, protein: 2},
                        "Baby carrots": {calories: -30, fat: 0, carbs: -8, protein: 1}
                      }
                    },
                    { baseAmount: 1, unit: "bunch", name: "asparagus, trimmed", aisle: "Aisle 3", 
                      substitutions: ["Green beans", "Broccoli florets", "Zucchini"],
                      nutritionAdjustments: {
                        "Green beans": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Broccoli florets": {calories: 5, fat: 0, carbs: 2, protein: 2},
                        "Zucchini": {calories: -5, fat: 0, carbs: -1, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "pieces", name: "lemons, 1 sliced, 1 juiced", aisle: "Aisle 2", 
                      substitutions: ["Limes", "White wine vinegar + lemon zest", "Orange juice"],
                      nutritionAdjustments: {
                        "Limes": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "White wine vinegar + lemon zest": {calories: -5, fat: 0, carbs: -2, protein: 0},
                        "Orange juice": {calories: 15, fat: 0, carbs: 8, protein: -1}
                      }
                    }
                ],
                utilities: [
                    { name: "Large oven-safe skillet or pan", aisle: "Aisle 10" },
                    { name: "Oven", aisle: "" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Measuring spoons", aisle: "Aisle 10" },
                    { name: "Instant-read thermometer", aisle: "" }
                ],
                instructions: [
                    "Preheat oven to 400¬∞F (200¬∞C). Pat chicken breasts dry and season with salt, pepper, and dried herbs.",
                    "In a large oven-safe pan, arrange halved potatoes and trimmed asparagus around the edges.",
                    "Place seasoned chicken breasts in the center. Top with lemon slices and drizzle with olive oil and lemon juice.",
                    "Bake for 25-30 minutes until chicken reaches 165¬∞F internal temperature and vegetables are tender.",
                    "Let rest for 5 minutes, garnish with fresh herbs, and serve hot."
                ],
                nutrition: { calories: 450, fat: 18, carbs: 35, protein: 42 }
            },
            2: {
                name: "Chicken Stir-fry",
                prepTime: "10 min",
                cookTime: "20 min",
                difficulty: "Easy",
                baseServings: 4,
                couponCode: "STIR-FRY",
                couponDescription: "05%, 10%, or 15% off stir-fry ingredients!",
                image: "https://images.unsplash.com/photo-1603133872878-684f208fb84b?w=800&q=80",
                ingredients: [
                    { baseAmount: 4, unit: "pieces", name: "chicken breasts, sliced", aisle: "Aisle 7", 
                      substitutions: ["Tofu", "Shrimp", "Turkey"],
                      nutritionAdjustments: {
                        "Tofu": {calories: -130, fat: -6, carbs: 8, protein: -18},
                        "Shrimp": {calories: -40, fat: -3, carbs: 2, protein: 5},
                        "Turkey": {calories: -15, fat: -1, carbs: 0, protein: 2}
                      }
                    },
                    { baseAmount: 2, unit: "pieces", name: "bell peppers, chopped", aisle: "Aisle 4", 
                      substitutions: ["Snap peas", "Zucchini", "Onions"],
                      nutritionAdjustments: {
                        "Snap peas": {calories: 10, fat: 0, carbs: 3, protein: 1},
                        "Zucchini": {calories: -15, fat: 0, carbs: -3, protein: 0},
                        "Onions": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "broccoli florets", aisle: "Aisle 3", 
                      substitutions: ["Cauliflower", "Green beans", "Mushrooms"],
                      nutritionAdjustments: {
                        "Cauliflower": {calories: -5, fat: 0, carbs: -1, protein: 0},
                        "Green beans": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Mushrooms": {calories: -10, fat: 0, carbs: -2, protein: 1}
                      }
                    },
                    { baseAmount: 3, unit: "cloves", name: "garlic, minced", aisle: "Aisle 5", 
                      substitutions: ["Ginger", "Onion powder", "Garlic powder"],
                      nutritionAdjustments: {
                        "Ginger": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Onion powder": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Garlic powder": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Wok or large skillet", aisle: "Aisle 10" },
                    { name: "Cooking oil or neutral oil spray", aisle: "Aisle 2" },
                    { name: "Wooden spoon or spatula", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Rice cooker (optional)", aisle: "" }
                ],
                instructions: [
                    "Heat wok or large skillet over high heat, add 2 tbsp oil",
                    "Add sliced chicken, cook until golden (5-6 minutes)",
                    "Add garlic, cook for 1 minute until fragrant",
                    "Add bell peppers and broccoli, stir-fry for 5-7 minutes",
                    "Season with soy sauce and serve over rice"
                ],
                nutrition: { calories: 320, fat: 12, carbs: 28, protein: 38 }
            },
            3: {
                name: "Vegan Lentil Soup",
                prepTime: "10 min",
                cookTime: "30 min",
                difficulty: "Moderate",
                baseServings: 4,
                couponCode: "VEGAN-SOUP",
                couponDescription: "05%, 10%, or 15% off vegan ingredients!",
                image: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=800&q=80",
                ingredients: [
                    { baseAmount: 2, unit: "cups", name: "dried lentils", aisle: "Aisle 2", 
                      substitutions: ["Chickpeas", "Split peas", "Beans"],
                      nutritionAdjustments: {
                        "Chickpeas": {calories: 50, fat: 4, carbs: 8, protein: 2},
                        "Split peas": {calories: -20, fat: 0, carbs: -5, protein: 0},
                        "Beans": {calories: 0, fat: 0, carbs: 0, protein: 2}
                      }
                    },
                    { baseAmount: 1, unit: "pieces", name: "large onion, diced", aisle: "Aisle 4", 
                      substitutions: ["Shallots", "Leeks", "Garlic"],
                      nutritionAdjustments: {
                        "Shallots": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Leeks": {calories: 5, fat: 0, carbs: 2, protein: 0},
                        "Garlic": {calories: -20, fat: 0, carbs: -5, protein: 0}
                      }
                    },
                    { baseAmount: 4, unit: "pieces", name: "carrots, sliced", aisle: "Aisle 3", 
                      substitutions: ["Parsnips", "Sweet potato", "Celery"],
                      nutritionAdjustments: {
                        "Parsnips": {calories: 20, fat: 0, carbs: 8, protein: 0},
                        "Sweet potato": {calories: 10, fat: 0, carbs: 4, protein: 0},
                        "Celery": {calories: -25, fat: 0, carbs: -6, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "can", name: "diced tomatoes", aisle: "Aisle 6", 
                      substitutions: ["Tomato sauce", "Fresh tomatoes", "Red peppers"],
                      nutritionAdjustments: {
                        "Tomato sauce": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Fresh tomatoes": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Red peppers": {calories: 0, fat: 0, carbs: 0, protein: 1}
                      }
                    }
                ],
                utilities: [
                    { name: "Large pot", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Wooden spoon", aisle: "Aisle 10" },
                    { name: "Measuring cups", aisle: "Aisle 10" },
                    { name: "Colander", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Saut√© onion in large pot until translucent (3 minutes)",
                    "Add carrots, cook for 5 minutes",
                    "Add lentils and 6 cups water, bring to boil",
                    "Reduce heat, add diced tomatoes, simmer 25 minutes",
                    "Season with salt and pepper, serve hot"
                ],
                nutrition: { calories: 280, fat: 8, carbs: 42, protein: 18 }
            },
            4: {
                name: "Quick Pasta Bake",
                prepTime: "15 min",
                cookTime: "25 min",
                difficulty: "Easy",
                baseServings: 4,
                couponCode: "PASTA-BAKE",
                couponDescription: "05%, 10%, or 15% off pasta products!",
                image: "https://images.unsplash.com/photo-1555949258-eb67b1ef0ceb?w=800&q=80",
                ingredients: [
                    { baseAmount: 1, unit: "lb", name: "pasta", aisle: "Aisle 1", 
                      substitutions: ["Whole wheat pasta", "Gluten-free pasta", "Penne"],
                      nutritionAdjustments: {
                        "Whole wheat pasta": {calories: -10, fat: 0, carbs: -2, protein: 2},
                        "Gluten-free pasta": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Penne": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "marinara sauce", aisle: "Aisle 6", 
                      substitutions: ["Alfredo sauce", "Pesto", "Cream sauce"],
                      nutritionAdjustments: {
                        "Alfredo sauce": {calories: 120, fat: 18, carbs: 0, protein: 4},
                        "Pesto": {calories: 60, fat: 14, carbs: -2, protein: 8},
                        "Cream sauce": {calories: 90, fat: 16, carbs: 2, protein: 3}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "mozzarella cheese", aisle: "Aisle 8", 
                      substitutions: ["Parmesan", "Cheddar", "Gouda"],
                      nutritionAdjustments: {
                        "Parmesan": {calories: -20, fat: -1, carbs: 0, protein: 8},
                        "Cheddar": {calories: 0, fat: 0, carbs: 0, protein: 2},
                        "Gouda": {calories: 10, fat: 1, carbs: 0, protein: 1}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "ricotta cheese", aisle: "Aisle 8", 
                      substitutions: ["Greek yogurt", "Cottage cheese", "Mascarpone"],
                      nutritionAdjustments: {
                        "Greek yogurt": {calories: -15, fat: 0, carbs: 2, protein: 0},
                        "Cottage cheese": {calories: 0, fat: 0, carbs: 0, protein: 1},
                        "Mascarpone": {calories: 40, fat: 8, carbs: 0, protein: -1}
                      }
                    }
                ],
                utilities: [
                    { name: "Large pot for boiling pasta", aisle: "Aisle 10" },
                    { name: "Baking dish or casserole dish", aisle: "Aisle 10" },
                    { name: "Oven", aisle: "" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Wooden spoon", aisle: "Aisle 10" },
                    { name: "Colander", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Preheat oven to 375¬∞F (190¬∞C)",
                    "Cook pasta according to package directions, drain",
                    "Mix pasta with marinara sauce and ricotta",
                    "Transfer to baking dish, top with mozzarella",
                    "Bake for 20-25 minutes until cheese is bubbly and golden"
                ],
                nutrition: { calories: 520, fat: 22, carbs: 58, protein: 28 }
            },
            5: {
                name: "Salmon with Vegetables",
                prepTime: "15 min",
                cookTime: "20 min",
                difficulty: "Moderate",
                baseServings: 4,
                couponCode: "SALMON-VEGIE",
                couponDescription: "05%, 10%, or 15% off salmon!",
                image: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=800&q=80",
                ingredients: [
                    { baseAmount: 4, unit: "pieces", name: "salmon fillets", aisle: "Aisle 7", 
                      substitutions: ["Cod", "Halibut", "Tilapia"],
                      nutritionAdjustments: {
                        "Cod": {calories: -80, fat: -8, carbs: 0, protein: 5},
                        "Halibut": {calories: -60, fat: -6, carbs: 0, protein: 3},
                        "Tilapia": {calories: -70, fat: -7, carbs: 0, protein: 4}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "Brussels sprouts", aisle: "Aisle 3", 
                      substitutions: ["Broccoli", "Cauliflower", "Green beans"],
                      nutritionAdjustments: {
                        "Broccoli": {calories: -10, fat: 0, carbs: -1, protein: 1},
                        "Cauliflower": {calories: -15, fat: 0, carbs: -3, protein: 0},
                        "Green beans": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "baby carrots", aisle: "Aisle 3", 
                      substitutions: ["Parsnips", "Root vegetables", "Asparagus"],
                      nutritionAdjustments: {
                        "Parsnips": {calories: 30, fat: 0, carbs: 10, protein: 1},
                        "Root vegetables": {calories: 15, fat: 0, carbs: 5, protein: 0},
                        "Asparagus": {calories: -20, fat: 0, carbs: -5, protein: 1}
                      }
                    },
                    { baseAmount: 3, unit: "tbsp", name: "olive oil", aisle: "Aisle 2", 
                      substitutions: ["Avocado oil", "Coconut oil", "Butter"],
                      nutritionAdjustments: {
                        "Avocado oil": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Coconut oil": {calories: 10, fat: 1, carbs: 1, protein: 0},
                        "Butter": {calories: 20, fat: 3, carbs: 0, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Baking sheet or sheet pan", aisle: "Aisle 10" },
                    { name: "Oven", aisle: "" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Tongs", aisle: "Aisle 10" },
                    { name: "Measuring spoons", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Preheat oven to 400¬∞F (200¬∞C)",
                    "Toss Brussels sprouts and carrots with olive oil, salt, and pepper",
                    "Spread vegetables on baking sheet, add salmon fillets",
                    "Bake for 18-20 minutes until salmon is cooked through",
                    "Drizzle with lemon juice and serve hot"
                ],
                nutrition: { calories: 380, fat: 20, carbs: 15, protein: 42 }
            },
            6: {
                name: "Beef Tacos",
                prepTime: "10 min",
                cookTime: "15 min",
                difficulty: "Easy",
                baseServings: 4,
                couponCode: "TACOS20",
                couponDescription: "20% off taco ingredients!",
                image: "https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=800&q=80",
                ingredients: [
                    { baseAmount: 1, unit: "lb", name: "ground beef", aisle: "Aisle 7", 
                      substitutions: ["Ground turkey", "Ground chicken", "Plant-based beef"],
                      nutritionAdjustments: {
                        "Ground turkey": {calories: -20, fat: -3, carbs: 0, protein: 2},
                        "Ground chicken": {calories: -30, fat: -4, carbs: 0, protein: 3},
                        "Plant-based beef": {calories: -10, fat: 2, carbs: 5, protein: -2}
                      }
                    },
                    { baseAmount: 8, unit: "pieces", name: "taco shells", aisle: "Aisle 1", 
                      substitutions: ["Soft tortillas", "Lettuce wraps", "Hard tostadas"],
                      nutritionAdjustments: {
                        "Soft tortillas": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Lettuce wraps": {calories: -80, fat: -5, carbs: -20, protein: 0},
                        "Hard tostadas": {calories: 10, fat: 1, carbs: 2, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "lettuce, shredded", aisle: "Aisle 3", 
                      substitutions: ["Cabbage", "Spinach", "Mixed greens"],
                      nutritionAdjustments: {
                        "Cabbage": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Spinach": {calories: 5, fat: 0, carbs: 1, protein: 1},
                        "Mixed greens": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "pieces", name: "tomatoes, diced", aisle: "Aisle 3", 
                      substitutions: ["Salsa", "Pico de gallo", "Cherry tomatoes"],
                      nutritionAdjustments: {
                        "Salsa": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Pico de gallo": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Cherry tomatoes": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "shredded cheese", aisle: "Aisle 8", 
                      substitutions: ["Queso fresco", "Cotija cheese", "Vegan cheese"],
                      nutritionAdjustments: {
                        "Queso fresco": {calories: -10, fat: -1, carbs: 0, protein: 1},
                        "Cotija cheese": {calories: 0, fat: 0, carbs: 0, protein: 2},
                        "Vegan cheese": {calories: -20, fat: -2, carbs: 2, protein: -3}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "sour cream", aisle: "Aisle 8", 
                      substitutions: ["Greek yogurt", "Crema", "Vegan sour cream"],
                      nutritionAdjustments: {
                        "Greek yogurt": {calories: -40, fat: -8, carbs: 2, protein: 5},
                        "Crema": {calories: 10, fat: 2, carbs: 0, protein: 0},
                        "Vegan sour cream": {calories: -20, fat: -3, carbs: 1, protein: -2}
                      }
                    }
                ],
                utilities: [
                    { name: "Large skillet", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Spatula", aisle: "Aisle 10" },
                    { name: "Tongs", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Brown ground beef in large skillet over medium-high heat (8-10 minutes)",
                    "Add taco seasoning and water, simmer for 5 minutes",
                    "Warm taco shells according to package directions",
                    "Assemble tacos with beef, lettuce, tomatoes, cheese, and sour cream",
                    "Serve immediately with your favorite toppings"
                ],
                nutrition: { calories: 380, fat: 18, carbs: 32, protein: 24 }
            },
            7: {
                name: "Margherita Pizza",
                prepTime: "15 min",
                cookTime: "15 min",
                difficulty: "Moderate",
                baseServings: 4,
                couponCode: "PIZZA25",
                couponDescription: "25% off pizza ingredients!",
                image: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=800&q=80",
                ingredients: [
                    { baseAmount: 1, unit: "lb", name: "pizza dough", aisle: "Aisle 1", 
                      substitutions: ["Homemade dough", "Flatbread", "Naan bread"],
                      nutritionAdjustments: {
                        "Homemade dough": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Flatbread": {calories: -30, fat: -2, carbs: -5, protein: 0},
                        "Naan bread": {calories: 20, fat: 2, carbs: 3, protein: 1}
                      }
                    },
                    { baseAmount: 8, unit: "oz", name: "fresh mozzarella", aisle: "Aisle 8", 
                      substitutions: ["Shredded mozzarella", "Buffalo mozzarella", "Vegan cheese"],
                      nutritionAdjustments: {
                        "Shredded mozzarella": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Buffalo mozzarella": {calories: 10, fat: 1, carbs: 0, protein: 1},
                        "Vegan cheese": {calories: -30, fat: -3, carbs: 2, protein: -5}
                      }
                    },
                    { baseAmount: 3, unit: "pieces", name: "fresh tomatoes, sliced", aisle: "Aisle 3", 
                      substitutions: ["Cherry tomatoes", "Tomato sauce", "Sun-dried tomatoes"],
                      nutritionAdjustments: {
                        "Cherry tomatoes": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Tomato sauce": {calories: 10, fat: 0, carbs: 3, protein: 0},
                        "Sun-dried tomatoes": {calories: 30, fat: 1, carbs: 6, protein: 1}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "fresh basil leaves", aisle: "Aisle 3", 
                      substitutions: ["Dried basil", "Fresh oregano", "Arugula"],
                      nutritionAdjustments: {
                        "Dried basil": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Fresh oregano": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Arugula": {calories: 5, fat: 0, carbs: 1, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "tbsp", name: "olive oil", aisle: "Aisle 2", 
                      substitutions: ["Avocado oil", "Garlic oil", "Herb oil"],
                      nutritionAdjustments: {
                        "Avocado oil": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Garlic oil": {calories: 5, fat: 0, carbs: 0, protein: 0},
                        "Herb oil": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Oven", aisle: "" },
                    { name: "Baking sheet or pizza stone", aisle: "Aisle 10" },
                    { name: "Rolling pin", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Preheat oven to 475¬∞F (245¬∞C) with pizza stone inside if using",
                    "Roll out pizza dough on floured surface to desired thickness",
                    "Brush dough with olive oil, add mozzarella and tomato slices",
                    "Bake for 12-15 minutes until crust is golden and cheese is bubbly",
                    "Top with fresh basil leaves and drizzle with olive oil before serving"
                ],
                nutrition: { calories: 420, fat: 16, carbs: 52, protein: 18 }
            },
            8: {
                name: "Chicken Caesar Salad",
                prepTime: "10 min",
                cookTime: "15 min",
                difficulty: "Easy",
                baseServings: 4,
                couponCode: "SALAD15",
                couponDescription: "15% off salad ingredients!",
                image: "https://images.unsplash.com/photo-1546793665-c74683f339c1?w=800&q=80",
                ingredients: [
                    { baseAmount: 2, unit: "pieces", name: "chicken breasts", aisle: "Aisle 7", 
                      substitutions: ["Rotisserie chicken", "Grilled shrimp", "Tofu"],
                      nutritionAdjustments: {
                        "Rotisserie chicken": {calories: 20, fat: 3, carbs: 0, protein: 0},
                        "Grilled shrimp": {calories: -40, fat: -2, carbs: 1, protein: 5},
                        "Tofu": {calories: -100, fat: -5, carbs: 3, protein: -12}
                      }
                    },
                    { baseAmount: 2, unit: "heads", name: "romaine lettuce, chopped", aisle: "Aisle 3", 
                      substitutions: ["Mixed greens", "Kale", "Spinach"],
                      nutritionAdjustments: {
                        "Mixed greens": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Kale": {calories: 10, fat: 0, carbs: 2, protein: 1},
                        "Spinach": {calories: 5, fat: 0, carbs: 1, protein: 1}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "parmesan cheese, shaved", aisle: "Aisle 8", 
                      substitutions: ["Pecorino Romano", "Asiago", "Vegan parmesan"],
                      nutritionAdjustments: {
                        "Pecorino Romano": {calories: 0, fat: 0, carbs: 0, protein: 1},
                        "Asiago": {calories: 10, fat: 1, carbs: 0, protein: 1},
                        "Vegan parmesan": {calories: -20, fat: -2, carbs: 1, protein: -3}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "croutons", aisle: "Aisle 1", 
                      substitutions: ["Homemade croutons", "Pita chips", "Tortilla strips"],
                      nutritionAdjustments: {
                        "Homemade croutons": {calories: -10, fat: -1, carbs: 0, protein: 0},
                        "Pita chips": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Tortilla strips": {calories: 5, fat: 0, carbs: 1, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "Caesar dressing", aisle: "Aisle 2", 
                      substitutions: ["Homemade Caesar", "Greek yogurt Caesar", "Lemon vinaigrette"],
                      nutritionAdjustments: {
                        "Homemade Caesar": {calories: -20, fat: -3, carbs: 0, protein: 0},
                        "Greek yogurt Caesar": {calories: -60, fat: -10, carbs: 2, protein: 3},
                        "Lemon vinaigrette": {calories: -40, fat: -6, carbs: -2, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Grill or skillet", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Large salad bowl", aisle: "Aisle 10" },
                    { name: "Tongs", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Season chicken breasts with salt and pepper",
                    "Grill or pan-sear chicken for 6-7 minutes per side until cooked through",
                    "Let chicken rest for 5 minutes, then slice into strips",
                    "Toss romaine lettuce with Caesar dressing in large bowl",
                    "Top with sliced chicken, parmesan, and croutons. Serve immediately"
                ],
                nutrition: { calories: 320, fat: 14, carbs: 18, protein: 32 }
            },
            9: {
                name: "Shrimp Scampi",
                prepTime: "10 min",
                cookTime: "15 min",
                difficulty: "Moderate",
                baseServings: 4,
                couponCode: "SHRIMP20",
                couponDescription: "20% off seafood!",
                image: "https://images.unsplash.com/photo-1633504581786-316c8002b1b9?w=800&q=80",
                ingredients: [
                    { baseAmount: 1, unit: "lb", name: "large shrimp, peeled", aisle: "Aisle 7", 
                      substitutions: ["Scallops", "White fish chunks", "Chicken breast strips"],
                      nutritionAdjustments: {
                        "Scallops": {calories: 20, fat: 1, carbs: 2, protein: 0},
                        "White fish chunks": {calories: -30, fat: -3, carbs: 0, protein: 2},
                        "Chicken breast strips": {calories: 30, fat: 4, carbs: -2, protein: 5}
                      }
                    },
                    { baseAmount: 8, unit: "oz", name: "linguine", aisle: "Aisle 1", 
                      substitutions: ["Spaghetti", "Angel hair pasta", "Zucchini noodles"],
                      nutritionAdjustments: {
                        "Spaghetti": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Angel hair pasta": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Zucchini noodles": {calories: -200, fat: -1, carbs: -35, protein: -3}
                      }
                    },
                    { baseAmount: 4, unit: "cloves", name: "garlic, minced", aisle: "Aisle 5", 
                      substitutions: ["Garlic powder", "Shallots", "Garlic paste"],
                      nutritionAdjustments: {
                        "Garlic powder": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Shallots": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Garlic paste": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 4, unit: "tbsp", name: "butter", aisle: "Aisle 8", 
                      substitutions: ["Olive oil", "Ghee", "Vegan butter"],
                      nutritionAdjustments: {
                        "Olive oil": {calories: 0, fat: 0, carbs: -1, protein: 0},
                        "Ghee": {calories: 10, fat: 1, carbs: 0, protein: 0},
                        "Vegan butter": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 0.5, unit: "cup", name: "white wine", aisle: "Aisle 9", 
                      substitutions: ["Chicken broth", "Vegetable broth", "Lemon juice + water"],
                      nutritionAdjustments: {
                        "Chicken broth": {calories: -20, fat: 0, carbs: -2, protein: 1},
                        "Vegetable broth": {calories: -25, fat: 0, carbs: -3, protein: 0},
                        "Lemon juice + water": {calories: -30, fat: 0, carbs: -4, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "cup", name: "fresh parsley, chopped", aisle: "Aisle 3", 
                      substitutions: ["Dried parsley", "Fresh basil", "Cilantro"],
                      nutritionAdjustments: {
                        "Dried parsley": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Fresh basil": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Cilantro": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Large skillet", aisle: "Aisle 10" },
                    { name: "Large pot for pasta", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Colander", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Cook linguine according to package directions, drain and set aside",
                    "Melt butter in large skillet over medium heat, add garlic and saut√© 1 minute",
                    "Add shrimp and cook 2-3 minutes until pink",
                    "Add white wine and lemon juice, simmer for 2 minutes",
                    "Toss pasta with shrimp mixture, garnish with parsley and serve"
                ],
                nutrition: { calories: 450, fat: 22, carbs: 38, protein: 28 }
            },
            10: {
                name: "Vegetable Curry",
                prepTime: "15 min",
                cookTime: "35 min",
                difficulty: "Moderate",
                baseServings: 4,
                couponCode: "CURRY25",
                couponDescription: "25% off curry ingredients!",
                image: "https://images.unsplash.com/photo-1455619452474-d2be8b1e70cd?w=800&q=80",
                ingredients: [
                    { baseAmount: 1, unit: "can", name: "chickpeas, drained", aisle: "Aisle 2", 
                      substitutions: ["Black beans", "Lentils", "Tofu cubes"],
                      nutritionAdjustments: {
                        "Black beans": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Lentils": {calories: -20, fat: 0, carbs: -5, protein: 1},
                        "Tofu cubes": {calories: -50, fat: 2, carbs: -10, protein: 3}
                      }
                    },
                    { baseAmount: 2, unit: "pieces", name: "large potatoes, cubed", aisle: "Aisle 3", 
                      substitutions: ["Sweet potatoes", "Cauliflower", "Butternut squash"],
                      nutritionAdjustments: {
                        "Sweet potatoes": {calories: 10, fat: 0, carbs: 5, protein: 0},
                        "Cauliflower": {calories: -80, fat: 0, carbs: -20, protein: 1},
                        "Butternut squash": {calories: -20, fat: 0, carbs: -5, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "pieces", name: "carrots, sliced", aisle: "Aisle 3", 
                      substitutions: ["Bell peppers", "Green beans", "Zucchini"],
                      nutritionAdjustments: {
                        "Bell peppers": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Green beans": {calories: -10, fat: 0, carbs: -3, protein: 0},
                        "Zucchini": {calories: -15, fat: 0, carbs: -4, protein: 0}
                      }
                    },
                    { baseAmount: 1, unit: "can", name: "coconut milk", aisle: "Aisle 2", 
                      substitutions: ["Coconut cream", "Cashew cream", "Almond milk"],
                      nutritionAdjustments: {
                        "Coconut cream": {calories: 50, fat: 8, carbs: 2, protein: 0},
                        "Cashew cream": {calories: 20, fat: 3, carbs: 1, protein: 2},
                        "Almond milk": {calories: -100, fat: -10, carbs: -5, protein: -1}
                      }
                    },
                    { baseAmount: 3, unit: "tbsp", name: "curry paste", aisle: "Aisle 5", 
                      substitutions: ["Curry powder", "Garam masala", "Thai curry paste"],
                      nutritionAdjustments: {
                        "Curry powder": {calories: 0, fat: 0, carbs: 0, protein: 0},
                        "Garam masala": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Thai curry paste": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    },
                    { baseAmount: 2, unit: "cups", name: "fresh spinach", aisle: "Aisle 3", 
                      substitutions: ["Kale", "Swiss chard", "Frozen spinach"],
                      nutritionAdjustments: {
                        "Kale": {calories: 10, fat: 0, carbs: 2, protein: 1},
                        "Swiss chard": {calories: 5, fat: 0, carbs: 1, protein: 0},
                        "Frozen spinach": {calories: 0, fat: 0, carbs: 0, protein: 0}
                      }
                    }
                ],
                utilities: [
                    { name: "Large pot", aisle: "Aisle 10" },
                    { name: "Cutting board", aisle: "Aisle 10" },
                    { name: "Sharp knife", aisle: "Aisle 10" },
                    { name: "Wooden spoon", aisle: "Aisle 10" },
                    { name: "Measuring spoons", aisle: "Aisle 10" }
                ],
                instructions: [
                    "Heat oil in large pot, saut√© curry paste for 1-2 minutes until fragrant",
                    "Add potatoes and carrots, cook for 5 minutes",
                    "Pour in coconut milk and bring to simmer",
                    "Add chickpeas and cook for 15-20 minutes until vegetables are tender",
                    "Stir in spinach until wilted, season with salt. Serve over rice"
                ],
                nutrition: { calories: 380, fat: 12, carbs: 58, protein: 14 }
            }
        };

        // State management
        let currentRecipeId = 1;
        let servings = 4;
        let baseServings = 4;
        let currentIngredientIndex = -1;
        let ingredients = [];
        let baseNutrition = {};
        
        // Favorite recipes state (in-memory storage since localStorage is not available)
        let favoriteRecipes = [];
        
        // Cart counter state (in-memory storage)
        let cartCount = 0;
        
        // Add All states per recipe (in-memory storage)
        let addAllStates = {};

        // View navigation
        function openRecipeDetail(recipeId) {
            // Save current scroll position before navigating
            scrollPositions[currentTab] = window.scrollY || window.pageYOffset;
            
            currentRecipeId = recipeId;
            loadRecipe(recipeId);
            document.getElementById('menuView').style.display = 'none';
            document.getElementById('recipeView').style.display = 'block';
            // Show ChatGPT button on recipe detail page
            document.getElementById('chatgptButton').classList.add('active');
            
            // Scroll to top of recipe detail
            window.scrollTo(0, 0);
        }

        function loadRecipe(recipeId) {
            const recipe = recipesData[recipeId];
            if (!recipe) return;

            // Reset servings to base
            servings = recipe.baseServings;
            baseServings = recipe.baseServings;
            
            // Update coupon button based on recipe type
            updateCouponButton(recipeId);
            
            // Load recipe data
            ingredients = recipe.ingredients.map(ing => ({
                ...ing,
                customSubstitution: null
            }));
            baseNutrition = recipe.nutrition;

            // Update UI elements
            document.getElementById('recipeTitle').textContent = recipe.name;
            document.getElementById('prepTime').textContent = recipe.prepTime;
            document.getElementById('cookTime').textContent = recipe.cookTime;
            document.getElementById('difficulty').textContent = recipe.difficulty;
            document.getElementById('servingsValue').textContent = servings;
            
            // Update favorite button state
            updateFavoriteButton();
            
            // Update star rating
            updateStarRating();
            
            // Update hero image
            const heroContainer = document.getElementById('heroImageContainer');
            heroContainer.innerHTML = `<img src="${recipe.image}" alt="${recipe.name}" onerror="this.style.display='none'; this.parentElement.innerHTML='üçΩÔ∏è'">`;
            
            // Generate ingredients list
            generateIngredientsList();
            
            // Initialize Add All button state
            setTimeout(() => initializeAddAllButton(), 10);
            
            // Generate utilities list
            generateUtilitiesList(recipe.utilities);
            
            // Generate instructions list
            generateInstructionsList(recipe.instructions);
            
            // Update nutrition
            updateNutritionFacts();
            
            // Generate reviews
            const reviewsContainer = document.getElementById('reviewsContainer');
            reviewsContainer.innerHTML = generateReviews();
            
            // Reset to ingredients tab
            showTab('ingredients');
            
            // Update button states
            updateButtonStates();
        }

        function generateIngredientsList() {
            const container = document.getElementById('ingredientsList');
            let html = '';
            
            ingredients.forEach((ingredient, index) => {
                html += `
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <div style="flex: 1;">
                                <div class="ingredient-text" id="ingredient-${index}"></div>
                                <div class="ingredient-aisle">${ingredient.aisle}</div>
                            </div>
                            <button class="substitution-button" onclick="showSubstitutionModal(${index})">Smart Substitution</button>
                        </div>
                    </div>
                `;
            });
            
            html += `
                <button class="add-cart-button" onclick="toggleAddRemoveAll()" id="addAllButton">
                    <span>üõí</span>
                    <span id="addAllButtonText">Add All to Cart</span>
                </button>
            `;
            
            container.innerHTML = html;
            updateIngredientAmounts();
        }

        function generateUtilitiesList(utilities) {
            const container = document.getElementById('utilitiesList');
            let html = '';
            
            utilities.forEach((utility, index) => {
                const hasAisle = utility.aisle && utility.aisle.trim() !== '';
                
                html += `
                    <div class="ingredient-item">
                        <div class="ingredient-main">
                            <div style="flex: 1;">
                                <div class="ingredient-text">${utility.name}</div>
                                ${hasAisle ? `<div class="ingredient-aisle">${utility.aisle}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function generateInstructionsList(instructions) {
            const container = document.getElementById('instructionsList');
            let html = '';
            
            instructions.forEach((instruction, index) => {
                html += `
                    <div class="instruction-item">
                        <div class="instruction-number">${index + 1}</div>
                        <div class="instruction-text">${instruction}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function goBackToMenu() {
            document.getElementById('recipeView').style.display = 'none';
            document.getElementById('menuView').style.display = 'block';
            // Hide ChatGPT button when returning to menu
            document.getElementById('chatgptButton').classList.remove('active');
            
            // Restore scroll position after DOM renders
            setTimeout(() => {
                const savedScrollPos = scrollPositions[currentTab] || 0;
                window.scrollTo(0, savedScrollPos);
            }, 10);
        }

        function showComingSoon() {
            showSuccessMessage(' Feature coming soon!');
        }

        // Format ingredient amount for display
        function formatAmount(amount, unit) {
            // Handle fractional amounts
            if (amount % 1 === 0) {
                return amount; // Whole number
            } else if (amount === 0.5) {
                return '1/2';
            } else if (amount === 0.25) {
                return '1/4';
            } else if (amount === 0.75) {
                return '3/4';
            } else if (amount === 1.5) {
                return '1 1/2';
            } else if (amount === 2.5) {
                return '2 1/2';
            } else {
                return amount.toFixed(1);
            }
        }

        // Update ingredient displays based on current servings
        function updateIngredientAmounts() {
            const multiplier = servings / baseServings;
            
            ingredients.forEach((ingredient, index) => {
                const scaledAmount = ingredient.baseAmount * multiplier;
                const formattedAmount = formatAmount(scaledAmount, ingredient.unit);
                
                let displayText = '';
                if (ingredient.customSubstitution) {
                    displayText = ingredient.customSubstitution;
                } else {
                    if (ingredient.unit === 'pieces') {
                        displayText = `${formattedAmount} ${ingredient.name}`;
                    } else {
                        displayText = `${formattedAmount} ${ingredient.unit} ${ingredient.name}`;
                    }
                }
                
                document.getElementById(`ingredient-${index}`).textContent = displayText;
            });
        }

        // Calculate current nutrition with substitutions applied
        function calculateCurrentNutrition() {
            let nutrition = { ...baseNutrition };
            
            // Apply nutrition adjustments from substitutions
            ingredients.forEach((ingredient) => {
                if (ingredient.customSubstitution && ingredient.nutritionAdjustments) {
                    const adjustment = ingredient.nutritionAdjustments[ingredient.customSubstitution];
                    if (adjustment) {
                        nutrition.calories += adjustment.calories;
                        nutrition.fat += adjustment.fat;
                        nutrition.carbs += adjustment.carbs;
                        nutrition.protein += adjustment.protein;
                    }
                }
            });
            
            return nutrition;
        }

        // Update nutrition facts based on current servings and substitutions
        function updateNutritionFacts() {
            const currentNutrition = calculateCurrentNutrition();
            const multiplier = servings / baseServings;
            
            const scaledCalories = Math.round(currentNutrition.calories * multiplier);
            const scaledFat = Math.round(currentNutrition.fat * multiplier);
            const scaledCarbs = Math.round(currentNutrition.carbs * multiplier);
            const scaledProtein = Math.round(currentNutrition.protein * multiplier);
            
            document.querySelector('.nutrition-grid .nutrition-item:nth-child(1) .nutrition-value').textContent = scaledCalories;
            document.querySelector('.nutrition-grid .nutrition-item:nth-child(2) .nutrition-value').textContent = scaledFat + 'g';
            document.querySelector('.nutrition-grid .nutrition-item:nth-child(3) .nutrition-value').textContent = scaledCarbs + 'g';
            document.querySelector('.nutrition-grid .nutrition-item:nth-child(4) .nutrition-value').textContent = scaledProtein + 'g';
        }

        // Servings counter
        function decreaseServings() {
            if (servings > 1) {
                servings--;
                document.getElementById('servingsValue').textContent = servings;
                updateButtonStates();
                updateIngredientAmounts();
                updateNutritionFacts();
            }
        }

        function increaseServings() {
            if (servings < 12) {
                servings++;
                document.getElementById('servingsValue').textContent = servings;
                updateButtonStates();
                updateIngredientAmounts();
                updateNutritionFacts();
            }
        }

        function updateButtonStates() {
            document.getElementById('decreaseBtn').disabled = servings <= 1;
            document.getElementById('increaseBtn').disabled = servings >= 12;
        }

        // Tabs
        function showTab(tabName) {
            const ingredientsTab = document.getElementById('ingredientsTab');
            const utilitiesTab = document.getElementById('utilitiesTab');
            const instructionsTab = document.getElementById('instructionsTab');
            const ingredientsList = document.getElementById('ingredientsList');
            const utilitiesList = document.getElementById('utilitiesList');
            const instructionsList = document.getElementById('instructionsList');

            // Remove active class from all tabs
            ingredientsTab.classList.remove('active');
            utilitiesTab.classList.remove('active');
            instructionsTab.classList.remove('active');
            
            // Hide all lists
            ingredientsList.style.display = 'none';
            utilitiesList.style.display = 'none';
            instructionsList.classList.remove('active');

            // Show selected tab and content
            if (tabName === 'ingredients') {
                ingredientsTab.classList.add('active');
                ingredientsList.style.display = 'block';
            } else if (tabName === 'utilities') {
                utilitiesTab.classList.add('active');
                utilitiesList.style.display = 'block';
            } else if (tabName === 'instructions') {
                instructionsTab.classList.add('active');
                instructionsList.classList.add('active');
            }
        }

        // Update coupon button based on recipe type
        function updateCouponButton(recipeId) {
            const container = document.getElementById('couponButtonContainer');
            
            // Recipes 1-5 are "This Week" with available coupons
            // Recipes 6-10 are "Past Recipes" with unavailable coupons
            if (recipeId >= 1 && recipeId <= 5) {
                // This Week - Available coupon (clickable)
                container.innerHTML = `
                    <button class="coupon-button" onclick="showCouponModal()">
                        <svg class="coupon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Price tag outline (angled/tilted) -->
                            <path d="M21.41 11.58L12.41 2.58C12.05 2.22 11.55 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.55 2.22 12.05 2.59 12.42L11.59 21.42C11.95 21.78 12.45 22 13 22C13.55 22 14.05 21.78 14.41 21.41L21.41 14.41C21.78 14.05 22 13.55 22 13C22 12.45 21.77 11.94 21.41 11.58Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <!-- Hole/ring at top for attachment -->
                            <circle cx="6.5" cy="6.5" r="1.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <!-- Percentage symbol (%) inside tag -->
                            <circle cx="10" cy="11" r="1" fill="currentColor"/>
                            <line x1="9" y1="15" x2="15" y2="9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <circle cx="14" cy="15" r="1" fill="currentColor"/>
                        </svg>
                        <span>Click For Coupon</span>
                    </button>
                `;
            } else if (recipeId >= 6 && recipeId <= 10) {
                // Past Recipes - Unavailable coupon (not clickable)
                container.innerHTML = `
                    <div class="coupon-button coupon-unavailable" aria-disabled="true" aria-label="Coupon unavailable for this recipe" role="button">
                        <svg class="coupon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Price tag outline (angled/tilted) - dimmed -->
                            <path d="M21.41 11.58L12.41 2.58C12.05 2.22 11.55 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.55 2.22 12.05 2.59 12.42L11.59 21.42C11.95 21.78 12.45 22 13 22C13.55 22 14.05 21.78 14.41 21.41L21.41 14.41C21.78 14.05 22 13.55 22 13C22 12.45 21.77 11.94 21.41 11.58Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <!-- Hole/ring at top for attachment -->
                            <circle cx="6.5" cy="6.5" r="1.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
                            <!-- Percentage symbol (%) inside tag -->
                            <circle cx="10" cy="11" r="1" fill="currentColor"/>
                            <line x1="9" y1="15" x2="15" y2="9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <circle cx="14" cy="15" r="1" fill="currentColor"/>
                        </svg>
                        <span>Coupon Unavailable</span>
                    </div>
                `;
            }
        }

        // Coupon modal
        function showCouponModal() {
            const recipe = recipesData[currentRecipeId];
            document.getElementById('couponCodeText').textContent = recipe.couponCode;
            document.getElementById('couponDescription').textContent = recipe.couponDescription;
            document.getElementById('couponModal').classList.add('active');
        }

        function closeCouponModal() {
            document.getElementById('couponModal').classList.remove('active');
            const copyButton = document.getElementById('copyButton');
            copyButton.classList.remove('copied');
            copyButton.textContent = 'Copy Code';
        }

        function copyCouponCode() {
            const recipe = recipesData[currentRecipeId];
            const code = recipe.couponCode;
            const copyButton = document.getElementById('copyButton');
            
            // Create a temporary textarea to copy the text
            const textarea = document.createElement('textarea');
            textarea.value = code;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                copyButton.classList.add('copied');
                copyButton.textContent = 'Copied!';
                
                setTimeout(() => {
                    copyButton.classList.remove('copied');
                    copyButton.textContent = 'Copy Code';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
            
            document.body.removeChild(textarea);
        }

        // Substitution modal
        function showSubstitutionModal(index) {
            currentIngredientIndex = index;
            const ingredient = ingredients[index];
            
            document.getElementById('substitutionTitle').textContent = 'Choose a Substitution';
            
            const optionsContainer = document.getElementById('substitutionOptions');
            optionsContainer.innerHTML = '';
            
            ingredient.substitutions.forEach((sub) => {
                const button = document.createElement('button');
                button.className = 'substitution-option';
                button.textContent = sub;
                button.onclick = () => selectSubstitution(sub);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('substitutionModal').classList.add('active');
        }

        function closeSubstitutionModal() {
            document.getElementById('substitutionModal').classList.remove('active');
            currentIngredientIndex = -1;
        }

        function selectSubstitution(substitution) {
            if (currentIngredientIndex >= 0) {
                ingredients[currentIngredientIndex].customSubstitution = substitution;
                document.getElementById(`ingredient-${currentIngredientIndex}`).textContent = substitution;
                closeSubstitutionModal();
                updateNutritionFacts();
                showSuccessMessage('Substitution applied!');
            }
        }

        // Update star rating display with proper filled/empty stars
        function updateStarRating() {
            const ratingData = recipeRatings[currentRecipeId];
            if (!ratingData) return;
            
            const starsDisplay = document.getElementById('starsDisplay');
            const reviewCount = document.getElementById('reviewCount');
            
            // Generate stars based on rating
            let starsHTML = '';
            const rating = ratingData.rating;
            const fullStars = Math.floor(rating);
            const remainder = rating - fullStars;
            
            // Add filled stars
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<span class="star filled">‚òÖ</span>';
            }
            
            // Add half star if decimal is 0.5 or more (round to nearest 0.5)
            if (remainder >= 0.3 && remainder < 0.8) {
                starsHTML += '<span class="star filled">‚òÖ</span>';
            } else if (remainder >= 0.8) {
                starsHTML += '<span class="star filled">‚òÖ</span>';
            }
            
            // Add empty stars to complete 5 stars
            const totalFilledStars = fullStars + (remainder >= 0.3 ? 1 : 0);
            const emptyStars = 5 - totalFilledStars;
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<span class="star empty">‚òÜ</span>';
            }
            
            starsDisplay.innerHTML = starsHTML;
            reviewCount.textContent = `(${ratingData.reviews} reviews)`;
        }
        
        // Toggle Add/Remove All functionality
        function toggleAddRemoveAll() {
            const recipe = recipesData[currentRecipeId];
            if (!recipe) return;
            
            const recipeKey = `recipe-${currentRecipeId}`;
            const ingredientCount = recipe.ingredients.length;
            
            // Initialize state if not exists
            if (!addAllStates[recipeKey]) {
                addAllStates[recipeKey] = { added: false, count: 0 };
            }
            
            const state = addAllStates[recipeKey];
            const button = document.getElementById('addAllButton');
            const buttonText = document.getElementById('addAllButtonText');
            
            if (state.added) {
                // Remove All from Cart
                cartCount -= state.count;
                if (cartCount < 0) cartCount = 0; // Safety check
                
                state.added = false;
                state.count = 0;
                buttonText.textContent = 'Add All to Cart';
                
                updateCartBadge();
                showSuccessMessage(`Removed ${ingredientCount} items from cart!`);
            } else {
                // Add All to Cart
                cartCount += ingredientCount;
                
                state.added = true;
                state.count = ingredientCount;
                buttonText.textContent = 'Remove All from Cart';
                
                updateCartBadge();
                showSuccessMessage(`Added ${ingredientCount} items to cart!`);
            }
        }
        
        // Initialize Add All button state based on recipe
        function initializeAddAllButton() {
            const recipeKey = `recipe-${currentRecipeId}`;
            const buttonText = document.getElementById('addAllButtonText');
            
            if (!buttonText) return;
            
            if (!addAllStates[recipeKey]) {
                addAllStates[recipeKey] = { added: false, count: 0 };
            }
            
            const state = addAllStates[recipeKey];
            
            if (state.added) {
                buttonText.textContent = 'Remove All from Cart';
            } else {
                buttonText.textContent = 'Add All to Cart';
            }
        }

        // Success message
        function showSuccessMessage(message) {
            const successMessage = document.getElementById('successMessage');
            successMessage.textContent = message;
            successMessage.classList.add('active');
            
            setTimeout(() => {
                successMessage.classList.remove('active');
            }, 2000);
        }

        // Bottom navigation
        function handleNavClick(section) {
            if (section === 'recipes') {
                return;
            }
            
            const messages = {
                Shop: 'Shop feature coming soon!',
		myitems: 'Favorites feature coming soon!',
                search: 'Search feature coming soon!',
                cart: 'Cart feature coming soon!',
                account: 'Account feature coming soon!'
            };
            
            showSuccessMessage(messages[section] || 'Feature coming soon!');
        }

        function openChatGPT() {
            var recipe = recipesData[currentRecipeId];
            if (!recipe) return;
            
            var recipeQuery = recipe.name + ' recipe - cooking tips, variations, and advice';
            var encodedQuery = encodeURIComponent(recipeQuery);
            var chatWindow = window.open('', '_blank');
            
            if (chatWindow) {
                var html = '<!DOCTYPE html><html><head>';
                html += '<title>Opening ChatGPT...</title>';
                html += '<meta http-equiv="refresh" content="0;url=https://chat.openai.com/">';
                html += '<style>';
                html += 'body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;text-align:center;padding:20px}';
                html += '.container{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;padding:40px;max-width:500px;box-shadow:0 8px 32px rgba(0,0,0,0.1)}';
                html += 'h1{font-size:28px;margin-bottom:20px;font-weight:600}';
                html += '.query-box{background:rgba(255,255,255,0.95);color:#333;padding:20px;border-radius:12px;margin:25px 0;font-size:16px;line-height:1.6;font-weight:500;box-shadow:0 4px 12px rgba(0,0,0,0.15)}';
                html += '.copy-btn{background:#10a37f;color:white;border:none;padding:12px 24px;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;margin:10px 5px;transition:all 0.2s}';
                html += '.copy-btn:hover{background:#0d8c6c;transform:translateY(-2px)}';
                html += '.copy-btn.copied{background:#4CAF50}';
                html += '.instructions{margin-top:20px;font-size:14px;opacity:0.9;line-height:1.8}';
                html += '.spinner{border:3px solid rgba(255,255,255,0.3);border-top:3px solid white;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:20px auto}';
                html += '@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}';
                html += '</style></head><body>';
                html += '<div class="container">';
                html += '<h1>&#127859; Recipe Query Ready!</h1>';
                html += '<div class="query-box">' + recipeQuery + '</div>';
                html += '<button class="copy-btn" onclick="copyQuery()" id="copyBtn">&#128203; Copy Query</button>';
                html += '<div class="instructions"><strong>ChatGPT is opening...</strong><br>The query has been copied to your clipboard!<br>Simply paste it (Ctrl+V or Cmd+V) in ChatGPT and press Enter.</div>';
                html += '<div class="spinner"></div></div>';
                html += '<scr' + 'ipt>';
                html += 'var query=decodeURIComponent("' + encodedQuery + '");';
                html += 'function copyToClipboard(){if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(query).catch(function(){fallbackCopy()})}else{fallbackCopy()}}';
                html += 'function fallbackCopy(){var t=document.createElement("textarea");t.value=query;t.style.position="fixed";t.style.opacity="0";document.body.appendChild(t);t.select();try{document.execCommand("copy")}catch(e){console.error("Copy failed:",e)}document.body.removeChild(t)}';
                html += 'function copyQuery(){copyToClipboard();var b=document.getElementById("copyBtn");b.classList.add("copied");b.textContent="‚úì Copied!";setTimeout(function(){b.classList.remove("copied");b.textContent="&#128203; Copy Query"},2000)}';
                html += 'copyToClipboard();';
                html += 'setTimeout(function(){window.location.href="https://chat.openai.com/"},1500);';
                html += '</scr' + 'ipt></body></html>';
                
                chatWindow.document.write(html);
                chatWindow.document.close();
            } else {
                alert('Please allow popups to use the ChatGPT feature.');
            }
            
            showSuccessMessage('Opening ChatGPT for "' + recipe.name + '"');
        }

        // Update favorites badge count
        function updateFavoritesBadge() {
            const count = favoriteRecipes.length;
            const badgeMenu = document.getElementById('favoritesBadgeMenu');
            const badgeRecipe = document.getElementById('favoritesBadgeRecipe');
            
            if (count === 0) {
                if (badgeMenu) badgeMenu.style.display = 'none';
                if (badgeRecipe) badgeRecipe.style.display = 'none';
            } else {
                if (badgeMenu) {
                    badgeMenu.style.display = 'flex';
                    badgeMenu.textContent = count;
                }
                if (badgeRecipe) {
                    badgeRecipe.style.display = 'flex';
                    badgeRecipe.textContent = count;
                }
            }
        }

        // Favorite functionality
        function toggleFavorite() {
            const recipeId = currentRecipeId;
            const index = favoriteRecipes.indexOf(recipeId);
            
            if (index > -1) {
                // Remove from favorites
                favoriteRecipes.splice(index, 1);
                updateFavoriteButton();
                updateFavoritesBadge();
                showSuccessMessage('Removed from favorites');
            } else {
                // Add to favorites
                favoriteRecipes.push(recipeId);
                updateFavoriteButton();
                updateFavoritesBadge();
                showSuccessMessage('Added to favorites!');
            }
        }
        
        function updateFavoriteButton() {
            const starIcon = document.getElementById('starIcon');
            const favoriteBtn = document.getElementById('favoriteButton');
            const isFavorited = favoriteRecipes.includes(currentRecipeId);
            
            if (isFavorited) {
                // Filled star
                starIcon.textContent = '‚òÖ';
                starIcon.className = 'star-icon star-filled';
                favoriteBtn.setAttribute('aria-label', 'Remove from favorites');
                favoriteBtn.setAttribute('title', 'Remove from favorites');
            } else {
                // Outline star
                starIcon.textContent = '‚òÜ';
                starIcon.className = 'star-icon star-outline';
                favoriteBtn.setAttribute('aria-label', 'Add to favorites');
                favoriteBtn.setAttribute('title', 'Add to favorites');
            }
        }

        // Cart badge functions
        function updateCartBadge() {
            const badgeMenu = document.getElementById('cartBadgeMenu');
            const badgeRecipe = document.getElementById('cartBadgeRecipe');
            
            if (cartCount === 0) {
                if (badgeMenu) badgeMenu.style.display = 'none';
                if (badgeRecipe) badgeRecipe.style.display = 'none';
            } else {
                if (badgeMenu) {
                    badgeMenu.style.display = 'flex';
                    badgeMenu.textContent = cartCount;
                    badgeMenu.classList.add('updated');
                    setTimeout(() => badgeMenu.classList.remove('updated'), 300);
                }
                if (badgeRecipe) {
                    badgeRecipe.style.display = 'flex';
                    badgeRecipe.textContent = cartCount;
                    badgeRecipe.classList.add('updated');
                    setTimeout(() => badgeRecipe.classList.remove('updated'), 300);
                }
            }
        }

        // Recipe reviews data
        const recipeReviews = {
            1: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/15/25',
                    title: 'Perfect Weeknight Dinner!',
                    text: 'This chicken recipe is amazing! The lemon herb seasoning gives it such a fresh taste. The chicken comes out juicy every time and the vegetables are perfectly roasted. My family asks for this weekly!',
                    reviewer: 'Sarah M.',
                    helpful: 8,
                    unhelpful: 0
                },
                {
                    stars: 4,
                    verified: true,
                    date: '11/10/25',
                    title: 'Delicious but needs more garlic',
                    text: 'Really good recipe overall. The chicken was tender and flavorful. I added extra garlic because I love it. The one-pan aspect makes cleanup so easy. Would make again!',
                    reviewer: 'Mike R.',
                    helpful: 5,
                    unhelpful: 1
                }
            ],
            2: [
                {
                    stars: 4,
                    verified: true,
                    date: '11/18/25',
                    title: 'Quick and tasty',
                    text: 'Made this on a busy weeknight and it was ready in 20 minutes. The sauce is flavorful and the vegetables stayed crisp. Perfect for meal prep too!',
                    reviewer: 'Jennifer L.',
                    helpful: 12,
                    unhelpful: 0
                },
                {
                    stars: 3,
                    verified: true,
                    date: '11/12/25',
                    title: 'Good but a bit salty',
                    text: 'The stir-fry was decent but I found the sauce too salty. Next time I\'ll reduce the soy sauce. The chicken cooked nicely though.',
                    reviewer: 'David K.',
                    helpful: 3,
                    unhelpful: 2
                }
            ],
            3: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/14/25',
                    title: 'Best soup ever!',
                    text: 'I\'m not even vegan and I love this soup! So hearty and flavorful. The lentils are perfectly cooked and the spices are just right. Make a big batch!',
                    reviewer: 'Emma W.',
                    helpful: 15,
                    unhelpful: 0
                },
                {
                    stars: 4,
                    verified: true,
                    date: '11/8/25',
                    title: 'Healthy and filling',
                    text: 'Great recipe for meal prep. The soup gets even better the next day. I added extra vegetables and it turned out wonderful. Very satisfying!',
                    reviewer: 'Rachel P.',
                    helpful: 7,
                    unhelpful: 1
                }
            ],
            4: [
                {
                    stars: 4,
                    verified: true,
                    date: '11/16/25',
                    title: 'Family favorite',
                    text: 'My kids love this pasta bake! It\'s cheesy, comforting, and easy to make. I sometimes add ground beef to make it heartier. Always a hit!',
                    reviewer: 'Lisa T.',
                    helpful: 9,
                    unhelpful: 0
                },
                {
                    stars: 3,
                    verified: true,
                    date: '11/5/25',
                    title: 'Decent but nothing special',
                    text: 'It\'s okay for a quick meal. The pasta was a bit mushy for my taste. I\'d prefer more seasoning. Not bad but not amazing either.',
                    reviewer: 'Tom H.',
                    helpful: 2,
                    unhelpful: 3
                }
            ],
            5: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/17/25',
                    title: 'Restaurant quality at home',
                    text: 'This salmon turns out perfect every time! Flaky, flavorful, and the vegetables complement it beautifully. Impressive enough for guests but easy enough for weeknights.',
                    reviewer: 'Amanda S.',
                    helpful: 18,
                    unhelpful: 0
                },
                {
                    stars: 4,
                    verified: true,
                    date: '11/11/25',
                    title: 'Healthy and delicious',
                    text: 'Love how healthy this meal is without sacrificing flavor. The salmon cooks evenly and the seasoning is spot on. My go-to salmon recipe now!',
                    reviewer: 'Chris B.',
                    helpful: 11,
                    unhelpful: 1
                }
            ],
            6: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/13/25',
                    title: 'Best taco seasoning!',
                    text: 'These tacos are incredible! The beef is so flavorful and juicy. The homemade seasoning blend is so much better than store-bought. Taco Tuesday will never be the same!',
                    reviewer: 'Maria G.',
                    helpful: 22,
                    unhelpful: 0
                },
                {
                    stars: 4,
                    verified: true,
                    date: '11/9/25',
                    title: 'Authentic taste',
                    text: 'Really good taco recipe. The meat is seasoned perfectly and stays moist. I add extra cilantro and lime. Great for feeding a crowd!',
                    reviewer: 'Carlos M.',
                    helpful: 14,
                    unhelpful: 1
                }
            ],
            7: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/19/25',
                    title: 'Like pizza from Italy!',
                    text: 'This is the best homemade pizza I\'ve ever made! The dough is perfect, the sauce is fresh, and the basil really makes it special. Better than delivery!',
                    reviewer: 'Tony R.',
                    helpful: 25,
                    unhelpful: 0
                },
                {
                    stars: 5,
                    verified: true,
                    date: '11/15/25',
                    title: 'Simple and perfect',
                    text: 'Proof that you don\'t need a lot of ingredients to make amazing pizza. The key is quality ingredients. This recipe is a keeper!',
                    reviewer: 'Olivia F.',
                    helpful: 19,
                    unhelpful: 0
                }
            ],
            8: [
                {
                    stars: 4,
                    verified: true,
                    date: '11/16/25',
                    title: 'Fresh and satisfying',
                    text: 'The homemade dressing is so much better than store-bought! The chicken is nicely seasoned and the croutons add great crunch. A complete meal!',
                    reviewer: 'Nicole J.',
                    helpful: 10,
                    unhelpful: 0
                },
                {
                    stars: 3,
                    verified: true,
                    date: '11/7/25',
                    title: 'Good but needs more dressing',
                    text: 'The salad was fresh and the chicken was cooked well, but I needed to double the dressing recipe. Otherwise pretty standard Caesar salad.',
                    reviewer: 'Brad W.',
                    helpful: 4,
                    unhelpful: 2
                }
            ],
            9: [
                {
                    stars: 5,
                    verified: true,
                    date: '11/18/25',
                    title: 'Elegant and easy!',
                    text: 'This shrimp scampi is restaurant-quality! The garlic butter sauce is divine and the shrimp cook quickly. Serve over pasta or with crusty bread. Amazing!',
                    reviewer: 'Patricia D.',
                    helpful: 16,
                    unhelpful: 0
                },
                {
                    stars: 4,
                    verified: true,
                    date: '11/12/25',
                    title: 'Garlicky perfection',
                    text: 'Love how garlicky this is! The shrimp are perfectly cooked and the sauce is buttery and delicious. I add extra lemon for brightness. Great date night meal!',
                    reviewer: 'Kevin L.',
                    helpful: 13,
                    unhelpful: 1
                }
            ],
            10: [
                {
                    stars: 4,
                    verified: true,
                    date: '11/14/25',
                    title: 'Warming and flavorful',
                    text: 'This curry is packed with vegetables and flavor! The spice level is perfect (not too hot). Great for meal prep and even better the next day. Very filling!',
                    reviewer: 'Priya S.',
                    helpful: 11,
                    unhelpful: 0
                },
                {
                    stars: 3,
                    verified: true,
                    date: '11/6/25',
                    title: 'Needs more spice',
                    text: 'The curry was good but a bit bland for my taste. I added more curry powder and chili flakes. The vegetables were nicely cooked though. Worth making again with adjustments.',
                    reviewer: 'James P.',
                    helpful: 5,
                    unhelpful: 3
                }
            ]
        };
        
        // Generate reviews HTML
        function generateReviews() {
            const reviews = recipeReviews[currentRecipeId];
            if (!reviews || reviews.length === 0) return '';
            
            let html = '';
            
            reviews.forEach(review => {
                // Generate stars
                let starsHTML = '';
                for (let i = 0; i < 5; i++) {
                    if (i < review.stars) {
                        starsHTML += '<span class="star filled">‚òÖ</span>';
                    } else {
                        starsHTML += '<span class="star empty">‚òÜ</span>';
                    }
                }
                
                html += `
                    <div class="review-card">
                        <div class="review-header">
                            <div class="review-stars">${starsHTML}</div>
                            ${review.verified ? '<span class="verified-badge">Verified Purchase</span>' : ''}
                            <span class="review-date">${review.date}</span>
                        </div>
                        <h3 class="review-title">${review.title}</h3>
                        <p class="review-text">${review.text}</p>
                        <p class="reviewer-name">${review.reviewer}</p>
                        <div class="review-actions">
                            <button class="helpful-btn" onclick="showComingSoon()">üëç ${review.helpful}</button>
                            <button class="helpful-btn" onclick="showComingSoon()">üëé ${review.unhelpful}</button>
                            <button class="flag-btn" onclick="showComingSoon()">üö©</button>
                        </div>
                    </div>
                `;
            });
            
            return html;
        }
        
        // Initialize
        loadRecipe(1);
        updateButtonStates();
        updateFavoritesBadge();
        updateCartBadge();
    </script>
</body>
</html>
